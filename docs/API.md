---
id: api
title: API
---

## Methods

<AUTOGENERATED_TABLE_OF_CONTENTS>

---

## 快速开始

  - 打包bundle

    ```
    const config = await Metro.loadConfig();

    await Metro.runBuild(config, {
      entry: 'index.js',
      out: 'bundle.js',
    });
    ```

  - 启动一个bundle服务，并观察文件的改变

    ```
    const config = await Metro.loadConfig();

    await Metro.runServer(config, {
      port: 8080,
    });
    ```

## 引用

下面开放的所有方法都接受一个额外的`config`选项。改对象是由`metro.config.js`导出([Metro配置](./CLI.md)), 你也可以直接使用`Metro.loadConfig`获取默认的配置

### `loadConfig(<options>)`

**Basic options:** `config`, `cwd`

加载Metro配置，可以从选项中的`config`指定，也可以从当前工作目录遍历层次结构到根目录，直到找到Metro配置文件(默认为`metro.config.js`)。返回的配置将与Metro的默认值合并

### `async runMetro(config)`

根据配置创建Metro服务器并将其返回。您可以将其的processRequest用作现有服务器中的中间件

### `async runBuild(config, <options>)`

**Required options:** `entry`, `out`

**Basic options:** `dev`, `optimize`, `platform`, `sourceMap`, `sourceMapUrl`

基于给定的config和options开启一个服务并返回该服务

### `async runServer(config, <options>)`

**Basic options:** `host`, `port`, `secure`, `secureKey`, `secureCert`, `hmrEnabled`

基于给定的config和options开启一个服务并返回该服务，我们推荐使用`runMetro`代替`runServer`, `runMetro`内部其实已经调用`runServer`方法

### `createConnectMiddleware(config, <options>)`

**Basic options:** `port`

不是创建完整的服务器，而是创建一个Connect中间件来响应bundle请求。然后可以将此中间件插入您自己的服务器。 `port`参数是可选的，仅用于记录目的。